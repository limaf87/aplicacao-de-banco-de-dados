USE ABD_03361_A_FELIPE_LIMA;

CREATE TABLE PRODUTO(
	ID_PRODUTO INT AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(100),
    PRECO DECIMAL(8,2)    
);

CREATE TABLE VENDAS(
	ID_VENDA INT AUTO_INCREMENT PRIMARY KEY,
    ID_PRODUTO INT,
    QUANTIDADE INT,
    DATA_VENDA DATE,
    FOREIGN KEY (ID_PRODUTO) REFERENCES PRODUTO(ID_PRODUTO)
);

CREATE TABLE FORNECEDOR(
	ID_FORNECEDOR INT auto_increment PRIMARY KEY,
    NOME VARCHAR(100),
    TELEFONE VARCHAR(20)
);

INSERT INTO PRODUTO (NOME, PRECO)
VALUES ('PÃO FRANCES 100G', 19.90),
('LEITE', 5.50),
('DONUTS', 4.50),
('PÃO NA CHAPA',5.65),
('QUEIJO PRATO 100G', 45.50),
('MORTADELA 100G', 29.90),	
('BOLO DE FUBÁ', 5.90),
('BOLO DE CHOCOLATE', 6.70);

SELECT *
FROM PRODUTO;

INSERT INTO VENDAS (ID_PRODUTO, QUANTIDADE, DATA_VENDA)
VALUES(2, 3, '2024-05-26'),
(3, 1, '2025-01-06'),
(5, 3, '2025-02-11'),
(3, 2, '2025-03-15'),
(6, 6, '2025-04-14'),
(1, 8, '2025-04-15'),
(4, 1, '2025-05-27'),
(5, 3, '2025-07-30'),
(1, 2, '2025-09-22'),
(7, 1, '2025-06-03'),
(2, 3, '2025-06-03'),
(4, 3, '2025-06-03'),
(7, 2, '2025-06-03'),
(8, 5, '2025-06-03');

INSERT INTO FORNECEDOR (NOME, TELEFONE)
VALUES('Farinha & Forno Ltda.', '(21)99999-0003'),
('Coberturas São Bento', '(31)99999-0004'),
('Açúcar Nobre Distrib.', '(71)99999-0008'),
('Sabores da Vovó Ingredientes', '(32)99999-0011'),
('Sabor Urbano Insumos', '(51)99999-0006'),
('Óleo Puro Atacado', '(81)99999-0009'),
('Mix Donut Soluções', '(62)99999-0012'),
('Recheios do Bairro', '(41)99999-0005');


-- EXERCICIOS

-- 1 LISTAR TODOS OS PRODUTOS CADASTRADOS.
SELECT *
FROM PRODUTO;

-- 2 LISTAR TOTAL DE UNIDADES VENDIDAS POR PRODUTO.
SELECT ID_PRODUTO, SUM(QUANTIDADE) AS TOTAL_UNIDADES_VENDIDAS
FROM VENDAS
GROUP BY ID_PRODUTO;
  
-- 3 LISTAR O TOTAL DE VENDAS DO BOLO DE FUBÁ.
SELECT SUM(quantidade) 
FROM VENDAS
WHERE ID_PRODUTO = 7;

select * from VENDAS;

-- 4 LISTAR O TOTAL DE VENDAS DO BOLO DE CHOCOLATE.
SELECT SUM(quantidade) 
FROM VENDAS
WHERE ID_PRODUTO = 8;

-- 5 PRODUTOS VENDIDOS EM 2025-06-03.
select ID_PRODUTO, DATA_VENDA
FROM VENDAS
WHERE DATA_VENDA = '2025-06-03'
ORDER BY ID_PRODUTO;

--

CREATE TABLE CLIENTE(
	ID_CLIENTE INT AUTO_INCREMENT PRIMARY KEY,
    NOME VARCHAR(50),
    SOBRENOME VARCHAR(50),
    TELEFONE VARCHAR(50),
    EMAIL VARCHAR(100)
);

CREATE TABLE AUTOMOVEL(
	ID_AUTOMOVEL INT AUTO_INCREMENT PRIMARY KEY,
    MARCA VARCHAR(50),
    MODELO VARCHAR(50),
    TIPO VARCHAR(50)
);

CREATE TABLE DATALOCACAO(
    ID_DATALOCACAO INT AUTO_INCREMENT PRIMARY KEY,
    ID_CLIENTE INT,
    ID_AUTOMOVEL INT,
    DATAINICIOLOCACAO DATE,
    DATAFINALLOCACAO DATE,
    FOREIGN KEY (ID_CLIENTE) REFERENCES CLIENTE(ID_CLIENTE),
    FOREIGN KEY (ID_AUTOMOVEL) REFERENCES AUTOMOVEL(ID_AUTOMOVEL)
);

INSERT INTO CLIENTE (NOME, SOBRENOME, TELEFONE, EMAIL)
VALUES ('Amanda', 'Souza', '(31)99999-0004', 'amanda@gmail.com'),
('Carlos', 'Silva', '(21)98888-1234', 'carlos.silva@email.com'),
('Beatriz', 'Oliveira', '(11)97777-5678', 'beatriz_oliveira@hotmail.com'),
('Eduardo', 'Pereira', '(41)95555-9876', 'eduardo.per@gmail.com'),
('Juliana', 'Costa', '(61)96666-4321', 'juliana.costa@outlook.com'),
('Felipe', 'Mendes', '(85)94444-8765', 'felipe.mendes@gmail.com'),
('Mariana', 'Lima', '(27)93333-6543', 'mariana.lima@gmail.com'),
('Thiago', 'Ribeiro', '(51)92222-3456', 'thiago.ribeiro@uol.com.br'),
('Larissa', 'Cardoso', '(32)91111-6789', 'larissa.cardoso@yahoo.com'),
('Ricardo', 'Martins', '(61)98888-2345', 'ricardo.martins@icloud.com');

INSERT INTO AUTOMOVEL (MARCA, MODELO, TIPO)
VALUES ('Toyota', 'Corolla', 'Sedan'),
('Honda', 'Civic', 'Sedan'),
('Volkswagen', 'Gol', 'Hatchback'),
('Ford', 'Fiesta', 'Hatchback'),
('Chevrolet', 'Onix', 'Hatchback'),
('BMW', '320i', 'Sedan'),
('Audi', 'A3', 'Sedan'),
('Nissan', 'Kicks', 'SUV'),
('Jeep', 'Compass', 'SUV'),
('Hyundai', 'HB20', 'Hatchback');

INSERT INTO DATALOCACAO (ID_CLIENTE, ID_AUTOMOVEL, DATAINICIOLOCACAO, DATAFINALLOCACAO)
VALUES
(1, 1, '2023-10-01', '2023-10-05'),
(2, 2, '2023-10-02', '2023-10-06'),
(3, 3, '2023-10-03', '2023-10-07'),
(4, 4, '2023-10-04', '2023-10-08'),
(5, 5, '2023-10-05', '2023-10-09'),
(6, 6, '2023-10-06', '2023-10-10'),
(7, 7, '2023-10-07', '2023-10-11'),
(8, 8, '2023-10-08', '2023-10-12'),
(9, 9, '2023-10-09', '2023-10-13'),
(10, 10, '2023-10-10', '2023-10-14');


-- 1 CONSULTAR TODOS CLIENTES CADASTRADOS
SELECT *
FROM CLIENTE;

-- 2 CONSULTAR TODOS OS AUTOMÓVEIS DISPONÍVEIS
SELECT *
FROM AUTOMOVEL;

-- 3 CONSULTAR INFORMAÇÕES SOBRE O CLIENTE E O AUTOMÓVEL LOCADO, INCLUINDO A DATA DE 
-- INICIO E FIM DA LOCAÇÃO, A MARCA E O MODELO DO AUTOMÓVEL.

SELECT *
FROM CLIENTE CL
WHERE ;

-- 4 CONSULTAR INFORMAÇÕES SOBRE OS AUTOMÓVEIS LOCADOS EM UMA DATA ESPECÍFICA,
-- INCLUINDO A MARCA E O MODELO
SELECT *
FROM AUTOMOVEL
WHERE ;

